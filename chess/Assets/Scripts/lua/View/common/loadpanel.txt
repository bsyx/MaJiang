loadpanel = {};
local this = loadpanel;

local gameObject;
local transform;
local message;

function loadpanel.Awake(obj)
    gameObject = obj;
    transform = obj.transform;
    message = gameObject:GetComponent('LuaBehaviour');
    
	this.regEvents();
	this.initComponent();

	--µÇÂ½
	httpMessage.Login();
end

function loadpanel.OnDestroy()
    EventManager.UnRegisterEvent(SetLoadText);
    EventManager.UnRegisterEvent(SetLoadActive);
end

function loadpanel.regEvents()
	EventManager.RegisterEvent(SetLoadText,this.setText);
    EventManager.RegisterEvent(SetLoadActive,this.setActive);
end

function loadpanel.initComponent()
    this.image = transform:Find("Image");
    this.content = transform:Find("Text");
end

function loadpanel.setActive(isActive)
    gameObject:SetActive(isActive);
end

function loadpanel.setText(str)
    gameObject:SetActive(true);
    if(str == nil) then
        this.content.gameObject:SetActive(false);
    else
        this.content.gameObject:SetActive(true);
        this.content.gameObject:GetComponent("Text").text = str;
    end
end

function loadpanel.Update()
    this.image.transform:Rotate(Vector3.New(0.0,0.0,60.0 * Time.deltaTime));
end